using Sources.GameLogic.Core;
using UnityEngine;

namespace Sources.GameLogic.Zobrist
{
    public class ZobristHasher
    {
        private static ulong[,,,] _hashTable;

        public static ulong EmptyBoard => 0;


        static ZobristHasher()
        {
            _hashTable = new ulong[4, 4, 4, 2];

            _hashTable[0, 0, 0, 0] = 12118438003349133447;
            _hashTable[0, 0, 0, 1] = 12416360416849986864;
            _hashTable[0, 0, 1, 0] = 12887331557181142410;
            _hashTable[0, 0, 1, 1] = 8749281163938375568;
            _hashTable[0, 0, 2, 0] = 11842730964352107672;
            _hashTable[0, 0, 2, 1] = 1830460922817341634;
            _hashTable[0, 0, 3, 0] = 16600473439414008156;
            _hashTable[0, 0, 3, 1] = 3369408996159995784;
            _hashTable[0, 1, 0, 0] = 1172888613869555032;
            _hashTable[0, 1, 0, 1] = 2898813484408577907;
            _hashTable[0, 1, 1, 0] = 7354367112449212520;
            _hashTable[0, 1, 1, 1] = 2549475350687069904;
            _hashTable[0, 1, 2, 0] = 3620782949305898537;
            _hashTable[0, 1, 2, 1] = 13270128733431955869;
            _hashTable[0, 1, 3, 0] = 3444623358855131012;
            _hashTable[0, 1, 3, 1] = 2746877480514919635;
            _hashTable[0, 2, 0, 0] = 18192983774634298066;
            _hashTable[0, 2, 0, 1] = 1535828775952457951;
            _hashTable[0, 2, 1, 0] = 17298011897050510035;
            _hashTable[0, 2, 1, 1] = 4479342643296594007;
            _hashTable[0, 2, 2, 0] = 6632458630502975917;
            _hashTable[0, 2, 2, 1] = 3204877090625716942;
            _hashTable[0, 2, 3, 0] = 545867388659051079;
            _hashTable[0, 2, 3, 1] = 1783678566805400227;
            _hashTable[0, 3, 0, 0] = 10090756773773486128;
            _hashTable[0, 3, 0, 1] = 6431018123915137183;
            _hashTable[0, 3, 1, 0] = 3229058598914786151;
            _hashTable[0, 3, 1, 1] = 16281958009079039532;
            _hashTable[0, 3, 2, 0] = 18213921075999918912;
            _hashTable[0, 3, 2, 1] = 10294895854630461786;
            _hashTable[0, 3, 3, 0] = 14743390312986593628;
            _hashTable[0, 3, 3, 1] = 4449558083377329195;
            _hashTable[1, 0, 0, 0] = 6834823873048930381;
            _hashTable[1, 0, 0, 1] = 6912253223361914144;
            _hashTable[1, 0, 1, 0] = 11731808785676937627;
            _hashTable[1, 0, 1, 1] = 15766188669582192616;
            _hashTable[1, 0, 2, 0] = 5740429210175720843;
            _hashTable[1, 0, 2, 1] = 10983013730670129292;
            _hashTable[1, 0, 3, 0] = 3886089741324812002;
            _hashTable[1, 0, 3, 1] = 10085969835604597869;
            _hashTable[1, 1, 0, 0] = 675549700594593953;
            _hashTable[1, 1, 0, 1] = 14288996520165717928;
            _hashTable[1, 1, 1, 0] = 18419646076165368178;
            _hashTable[1, 1, 1, 1] = 8448903623019841544;
            _hashTable[1, 1, 2, 0] = 6476192796772549913;
            _hashTable[1, 1, 2, 1] = 9259459947646572337;
            _hashTable[1, 1, 3, 0] = 10772376404634552386;
            _hashTable[1, 1, 3, 1] = 3971584063018387196;
            _hashTable[1, 2, 0, 0] = 8201966368823669920;
            _hashTable[1, 2, 0, 1] = 7526881229847306748;
            _hashTable[1, 2, 1, 0] = 13434331115478731777;
            _hashTable[1, 2, 1, 1] = 10220581938223687103;
            _hashTable[1, 2, 2, 0] = 14729357408479620474;
            _hashTable[1, 2, 2, 1] = 9365107047632318438;
            _hashTable[1, 2, 3, 0] = 17607642674736844620;
            _hashTable[1, 2, 3, 1] = 6095564693390664403;
            _hashTable[1, 3, 0, 0] = 9052495705034745859;
            _hashTable[1, 3, 0, 1] = 8285653463901853441;
            _hashTable[1, 3, 1, 0] = 14215491718826920826;
            _hashTable[1, 3, 1, 1] = 2665774210830401556;
            _hashTable[1, 3, 2, 0] = 14230427250881753461;
            _hashTable[1, 3, 2, 1] = 15947261077098971211;
            _hashTable[1, 3, 3, 0] = 784230272684556386;
            _hashTable[1, 3, 3, 1] = 6507016582428145945;
            _hashTable[2, 0, 0, 0] = 3712109025107698225;
            _hashTable[2, 0, 0, 1] = 86530230938654807;
            _hashTable[2, 0, 1, 0] = 11343678603656649373;
            _hashTable[2, 0, 1, 1] = 12409332971024039203;
            _hashTable[2, 0, 2, 0] = 17167345974245516316;
            _hashTable[2, 0, 2, 1] = 3235404221253061815;
            _hashTable[2, 0, 3, 0] = 12562855951878380386;
            _hashTable[2, 0, 3, 1] = 4320196601763997280;
            _hashTable[2, 1, 0, 0] = 13350540076405927447;
            _hashTable[2, 1, 0, 1] = 4466101232849707648;
            _hashTable[2, 1, 1, 0] = 985793416227587536;
            _hashTable[2, 1, 1, 1] = 7972487033037152031;
            _hashTable[2, 1, 2, 0] = 342482017122608758;
            _hashTable[2, 1, 2, 1] = 7653934392853229145;
            _hashTable[2, 1, 3, 0] = 10936228122539700644;
            _hashTable[2, 1, 3, 1] = 16460041377657806360;
            _hashTable[2, 2, 0, 0] = 11287665551059637367;
            _hashTable[2, 2, 0, 1] = 14886502757148281221;
            _hashTable[2, 2, 1, 0] = 5189936723061251494;
            _hashTable[2, 2, 1, 1] = 7796981630423283295;
            _hashTable[2, 2, 2, 0] = 12417252800433726067;
            _hashTable[2, 2, 2, 1] = 1777430496086110648;
            _hashTable[2, 2, 3, 0] = 5276885433366631627;
            _hashTable[2, 2, 3, 1] = 13098458078411900289;
            _hashTable[2, 3, 0, 0] = 4861576777792971502;
            _hashTable[2, 3, 0, 1] = 2674130481576154082;
            _hashTable[2, 3, 1, 0] = 3823638047370171647;
            _hashTable[2, 3, 1, 1] = 13083521388725731748;
            _hashTable[2, 3, 2, 0] = 12324489344800141868;
            _hashTable[2, 3, 2, 1] = 16849344855536110569;
            _hashTable[2, 3, 3, 0] = 11412230641727108882;
            _hashTable[2, 3, 3, 1] = 429091868592061553;
            _hashTable[3, 0, 0, 0] = 10686487449349112672;
            _hashTable[3, 0, 0, 1] = 9022852748673645940;
            _hashTable[3, 0, 1, 0] = 1846740780229719025;
            _hashTable[3, 0, 1, 1] = 3499607648640301788;
            _hashTable[3, 0, 2, 0] = 13545092144007940526;
            _hashTable[3, 0, 2, 1] = 13920010762289583929;
            _hashTable[3, 0, 3, 0] = 2432981536496840442;
            _hashTable[3, 0, 3, 1] = 2148842996560950531;
            _hashTable[3, 1, 0, 0] = 10448372066918912692;
            _hashTable[3, 1, 0, 1] = 6296138285775205051;
            _hashTable[3, 1, 1, 0] = 12426726620287075266;
            _hashTable[3, 1, 1, 1] = 7445539227955648276;
            _hashTable[3, 1, 2, 0] = 5489540189204166449;
            _hashTable[3, 1, 2, 1] = 6817157219014769992;
            _hashTable[3, 1, 3, 0] = 2935365728576555384;
            _hashTable[3, 1, 3, 1] = 16883191770852820676;
            _hashTable[3, 2, 0, 0] = 12978167698164757367;
            _hashTable[3, 2, 0, 1] = 13384198191251274108;
            _hashTable[3, 2, 1, 0] = 6935074888921888950;
            _hashTable[3, 2, 1, 1] = 14972950515945780235;
            _hashTable[3, 2, 2, 0] = 7795209648077778879;
            _hashTable[3, 2, 2, 1] = 8543936699264685854;
            _hashTable[3, 2, 3, 0] = 9718231256594326465;
            _hashTable[3, 2, 3, 1] = 17636042525031480723;
            _hashTable[3, 3, 0, 0] = 10438668625055584422;
            _hashTable[3, 3, 0, 1] = 13873682502303359543;
            _hashTable[3, 3, 1, 0] = 4729756666757113679;
            _hashTable[3, 3, 1, 1] = 11603443149980032340;
            _hashTable[3, 3, 2, 0] = 14968454230886761682;
            _hashTable[3, 3, 2, 1] = 15108363883899053784;
            _hashTable[3, 3, 3, 0] = 7552676784649404751;
            _hashTable[3, 3, 3, 1] = 12058169155191418697;
        }


        public static ulong GetStoneHash(int row, int column, int peak, PlayerColor playerColor)
        {
            int color = playerColor.IsWhite ? 1 : 0;
            return _hashTable[row, column, peak, color];
        }
    }
}
